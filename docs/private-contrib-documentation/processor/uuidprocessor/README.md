# uuid processor

<!-- distribution links hack -->
[verified]: https://github.com/solarwinds/solarwinds-otel-collector-releases#verified
[playground]: https://github.com/solarwinds/solarwinds-otel-collector-releases#playground
[k8s]: https://github.com/solarwinds/solarwinds-otel-collector-releases#k8s

<!-- status autogenerated section -->
| Status        |           |
| ------------- |-----------|
| Stability     | [development]: metrics, logs, traces   |
| Distributions | [playground], [verified] |

[development]: https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/component-stability.md#development
[playground]: 
[verified]: 
<!-- end autogenerated section -->

`uuid` processor adds `host.bios-uuid` and `host.machine-uuid` resource attributes to all telemetry data (metrics, logs, and traces). These attributes provide unique identifiers for the host machine across different telemetry signals.

## How it works

The processor retrieves UUIDs using the following logic:

### UUID Retrieval Process

1. **BIOS UUID**:

   - If `bios_uuid` is configured: Uses the configured value (validates it as proper UUID format)
   - If `bios_uuid` is not configured: Attempts to retrieve from the system
   - If retrieval/validation fails: Processor logs error and skips processing the signal - the signal passes through without modifications, no attributes are added

2. **Machine UUID**:

   - Always attempts to retrieve from the system (no configuration option)
   - If retrieval fails: Logs error but continues processing - adds the BIOS UUID

3. **Error Handling**:

   - The processor skips processing and logs an error if the **BIOS UUID fails** to be retrieved/parsed, regardless of Machine UUID status
   - BIOS UUID is considered **required** - the processor treats it as the primary identifier
   - Machine UUID is considered **optional** - it can fail without affecting other attributes addition
   - If BIOS UUID succeeds but Machine UUID fails, the processor continues and adds only the BIOS UUID
   - Empty UUIDs are not added as attributes to telemetry data

4. **Performance**:
   - UUID retrieval is performed only once using `sync.Once` for efficiency
   - Subsequent calls return cached values

### UUID Sources by Platform

**Windows:**

- `host.bios-uuid` - WMI: `Win32_ComputerSystemProduct`
- `host.machine-uuid` - Registry: `SOFTWARE\Microsoft\Cryptography`

**Linux:**

- `host.bios-uuid` - File: `/sys/class/dmi/id/product_uuid`, returns empty string without sudo permissions
- `host.machine-uuid` - File: `/etc/machine-id`

## Configuration

### Basic Configuration

The processor can be used without any configuration:

```yaml
processors:
  uuid:
```

### Advanced Configuration

You can explicitly configure the BIOS UUID if needed. This is recommended in case you want to avoid running collector with `sudo` which is required for getting the value from the OS. You can specify it manually instead. 

```yaml
processors:
  uuid:
    bios_uuid: "123e4567-e89b-12d3-a456-426614174000"
```

Or using an environment variable:

```yaml
processors:
  uuid:
    bios_uuid: "{{.env.bios_uuid}}"
```

#### Configuration Parameters

| Parameter | Type   | Required | Description                                                                                                                                                                                              |
| --------- | ------ | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| bios_uuid | string | No       | Explicitly set BIOS UUID. Must be a valid UUID format. If not provided, the processor attempts to retrieve it from the system. Configuration validation will fail if an invalid UUID format is provided. |

**Note**: The configured `bios_uuid` is validated at configuration time for proper UUID format. If validation fails, the processor will fail to start. This is different from system retrieval failures, which are handled at runtime.

### Example Pipeline Configuration

```yaml
processors:
  uuid:
    bios_uuid: "{{.env.bios_uuid}}"

service:
  pipelines:
    metrics:
      processors: [uuid]
    logs:
      processors: [uuid]
    traces:
      processors: [uuid]
```
